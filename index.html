<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Moje Portfolio</title>
    
    <script src="data.js"></script>

    <style>
        /* ========================================= */
        /* 1. CONFIG & RESET */
        /* ========================================= */
        :root { 
            --bg-body: #0f0f0f;
            --surface: #181818;
            --surface-hover: #222222;
            --accent: #7c4dff; /* Odrobinę jaśniejszy fiolet */
            --accent-glow: rgba(124, 77, 255, 0.3);
            --text-main: #f0f0f0;
            --text-sec: #a0a0a0;
            --border: #333; 
            --radius: 16px;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif;
            background-color: var(--bg-body);
            color: var(--text-main);
            margin: 0; padding: 0; line-height: 1.6;
            display: flex; flex-direction: column; min-height: 100vh;
            overflow-x: hidden; /* Zapobiega poziomemu przewijaniu przy animacjach */
        }

        /* Płynne przewijanie całej strony */
        html { scroll-behavior: smooth; }

        /* Error Box */
        #error-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 9999; justify-content: center; align-items: center; text-align: center; padding: 20px; }
        .error-content { border: 2px solid red; padding: 20px; background: #220000; color: white; max-width: 400px; }

        /* ========================================= */
        /* 2. NAWIGACJA (GLASSMORPHISM) */
        /* ========================================= */
        nav { 
            background: rgba(15, 15, 15, 0.75); /* Półprzezroczystość */
            backdrop-filter: blur(12px); /* Efekt rozmycia szkła */
            -webkit-backdrop-filter: blur(12px);
            padding: 15px 20px; 
            border-bottom: 1px solid rgba(255,255,255,0.05); 
            display: flex; justify-content: space-between; align-items: center; 
            position: sticky; top: 0; z-index: 100; 
            transition: all 0.3s ease;
        }
        
        .logo { font-weight: 800; font-size: 1.3rem; letter-spacing: -0.5px; cursor: pointer; }
        
        .nav-links button { 
            background: transparent; 
            border: none; 
            color: var(--text-sec); 
            font-size: 0.95rem; 
            cursor: pointer; 
            margin-left: 5px; 
            padding: 8px 16px;
            border-radius: 20px;
            font-family: inherit; 
            font-weight: 500;
            transition: all 0.3s ease; 
        }
        
        .nav-links button:hover { color: white; background: rgba(255,255,255,0.05); }
        .nav-links button.active { color: white; background: var(--accent); box-shadow: 0 4px 15px var(--accent-glow); }

        /* ========================================= */
        /* 3. LAYOUT & SEKCJE */
        /* ========================================= */
        main { flex: 1; padding: 40px 20px; max-width: 1100px; margin: 0 auto; width: 100%; box-sizing: border-box; }
        
        .section { display: none; opacity: 0; transform: translateY(20px); transition: opacity 0.4s ease, transform 0.4s ease; }
        .section.active { display: block; opacity: 1; transform: translateY(0); }

        /* --- ANIMACJE SCROLLOWANIA (Intersection Observer) --- */
        .scroll-hidden {
            opacity: 0;
            transform: translateY(40px); /* Przesunięcie w dół */
            transition: all 0.8s cubic-bezier(0.25, 1, 0.5, 1); /* Bardzo płynna krzywa animacji */
        }
        .scroll-show {
            opacity: 1;
            transform: translateY(0);
        }

        /* ========================================= */
        /* 4. ELEMENTY UI (HERO, KARTY, BUTTONY) */
        /* ========================================= */
        
        /* Hero */
        .hero { text-align: center; padding: 60px 0; }
        .avatar { 
            width: 140px; height: 140px; 
            background-color: #333; border-radius: 50%; 
            display: inline-block; margin-bottom: 25px; 
            object-fit: cover; 
            border: 4px solid var(--surface);
            box-shadow: 0 0 0 3px var(--accent); /* Podwójna ramka */
        }
        #hero-title { font-size: 2.5rem; margin: 0 0 10px 0; letter-spacing: -1px; background: linear-gradient(to right, #fff, #aaa); -webkit-background-clip: text; -webkit-text-fill-color: transparent;}
        #hero-bio { color: var(--text-sec); font-size: 1.1rem; max-width: 600px; margin: 0 auto 30px auto; }

        .btn-cta { 
            background: var(--accent); color: white; border: none; 
            padding: 12px 30px; border-radius: 30px; 
            cursor: pointer; font-size: 1rem; font-weight: 600;
            transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.3s;
            box-shadow: 0 5px 20px var(--accent-glow);
        }
        .btn-cta:hover { transform: scale(1.05) translateY(-2px); box-shadow: 0 10px 25px var(--accent-glow); }

        /* O Mnie Extended */
        .about-extended {
            margin: 60px auto; max-width: 800px; text-align: left;
            background: var(--surface); padding: 40px; border-radius: var(--radius);
            border: 1px solid rgba(255,255,255,0.05);
            white-space: pre-line; line-height: 1.8; color: #ccc;
        }
        .about-extended h3 { margin-top: 0; color: var(--accent); font-size: 1.5rem; margin-bottom: 20px;}

        /* Karty Projektów & Biblioteki */
        .grid, .projects-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 25px; }
        
        .card, .project-card { 
            background: var(--surface); 
            border-radius: var(--radius); 
            overflow: hidden; 
            border: 1px solid rgba(255,255,255,0.03); 
            display: flex; flex-direction: column; 
            transition: transform 0.3s ease, box-shadow 0.3s ease, background 0.3s;
        }
        
        .card:hover, .project-card:hover { 
            transform: translateY(-8px); 
            background: var(--surface-hover);
            box-shadow: 0 20px 40px rgba(0,0,0,0.4); 
            border-color: rgba(255,255,255,0.1);
        }

        /* Specyficzne dla Biblioteki */
        .card-img { 
            height: 180px; width: 100%; 
            background: #252525; display: flex; align-items: center; justify-content: center; 
            color: #555; object-fit: cover; 
            border-bottom: 1px solid rgba(255,255,255,0.05);
        }
        .card-body { padding: 20px; display: flex; flex-direction: column; flex-grow: 1; }
        .meta-row { display: flex; justify-content: space-between; margin-bottom: 12px; font-size: 0.8rem; }
        
        .badge { 
            font-size: 0.7rem; font-weight: 700; padding: 4px 10px; border-radius: 6px; letter-spacing: 0.5px;
        }
        .cat-book { background: rgba(52, 152, 219, 0.15); color: #5dade2; }
        .cat-movie { background: rgba(231, 76, 60, 0.15); color: #ec7063; }
        .cat-series { background: rgba(46, 204, 113, 0.15); color: #58d68d; }

        /* Specyficzne dla Projektów */
        .project-card { padding: 25px; border-left: 4px solid var(--accent); }
        .project-title { font-size: 1.4rem; font-weight: 700; color: white; margin: 0; }
        .project-year { opacity: 0.6; font-size: 0.85rem; background: rgba(255,255,255,0.05); padding: 3px 8px; border-radius: 6px;}
        .project-role { color: var(--accent); font-weight: 600; font-size: 0.9rem; margin-top: 5px; display: block; margin-bottom: 15px; }

        /* Statystyki */
        .stats-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; }
        .stat-card { 
            background: var(--surface); padding: 30px 20px; border-radius: var(--radius); 
            border: 1px solid rgba(255,255,255,0.03); text-align: center; 
        }
        .stat-number { font-size: 3.5rem; font-weight: 800; color: var(--accent); margin-bottom: 0px; line-height: 1; letter-spacing: -2px;}
        .stat-label { color: var(--text-sec); font-size: 0.8rem; letter-spacing: 1px; font-weight: 600; margin-top: 10px; display: block; }

        /* Kontrolery (Search/Filter) */
        .controls-container { 
            background: var(--surface); padding: 25px; border-radius: var(--radius); 
            border: 1px solid rgba(255,255,255,0.03); margin-bottom: 40px; 
        }
        .search-input { 
            width: 100%; max-width: 400px; padding: 14px 20px; border-radius: 12px; 
            border: 1px solid var(--border); background: #0a0a0a; color: white; 
            font-size: 1rem; transition: 0.3s;
        }
        .search-input:focus { outline: none; border-color: var(--accent); box-shadow: 0 0 0 3px rgba(124, 77, 255, 0.1); }
        
        .filter-btn { 
            background: transparent; color: var(--text-sec); border: 1px solid var(--border); 
            padding: 8px 20px; border-radius: 25px; cursor: pointer; font-size: 0.9rem; transition: 0.3s; 
        }
        .filter-btn:hover { border-color: var(--text-main); color: var(--text-main); }
        .filter-btn.active { background: var(--accent); color: white; border-color: var(--accent); }
        
        select { 
            background-color: #0a0a0a; color: #e0e0e0; border: 1px solid var(--border); 
            padding: 8px 16px; border-radius: 25px; cursor: pointer; outline: none; 
        }

        /* Cytaty */
        .quote-container { margin: 80px auto 40px auto; max-width: 700px; text-align: center; display: none; }
        .quote-box { 
            background: linear-gradient(145deg, #1a1a1a, #222); 
            padding: 40px; border-radius: var(--radius); position: relative; 
            box-shadow: 0 20px 50px rgba(0,0,0,0.5); 
        }
        .quote-text { font-size: 1.4rem; font-style: italic; color: #ddd; margin-bottom: 25px; font-family: Georgia, serif; }
        .quote-author { color: var(--accent); font-weight: 700; letter-spacing: 1px; text-transform: uppercase; font-size: 0.9rem;}

        /* Stopka */
        .site-footer { 
            background-color: #0d0d0d; border-top: 1px solid rgba(255,255,255,0.05); 
            padding: 60px 20px; margin-top: 80px; text-align: center; 
        }
        .social-btn { 
            background: rgba(255,255,255,0.05); color: #ccc; padding: 10px 20px; 
            border-radius: 30px; text-decoration: none; display: inline-block; margin: 5px; transition: 0.3s;
        }
        .social-btn:hover { background: var(--accent); color: white; transform: translateY(-3px); }

        /* Czytaj dalej / Opisy */
        .card-description { font-size: 0.95rem; color: #999; margin-top: 15px; white-space: pre-line; line-height: 1.6; }
        .read-more-btn { background: none; border: none; color: var(--accent); cursor: pointer; font-size: 0.9rem; font-weight: 600; padding: 0; margin-left: 5px; }

        /* ========================================= */
        /* 5. MOBILE (RESPONSYWNOŚĆ) */
        /* ========================================= */
        @media (max-width: 768px) {
            nav { flex-direction: column; padding: 15px; gap: 15px; }
            .nav-links { display: flex; flex-wrap: wrap; justify-content: center; gap: 8px; width: 100%; }
            .nav-links button { margin: 0; font-size: 0.85rem; background: rgba(255,255,255,0.05); }
            
            .hero { padding: 30px 0; }
            #hero-title { font-size: 2rem; }
            
            .stats-grid { grid-template-columns: 1fr; gap: 15px; }
            .stat-number { font-size: 3rem; }
            
            .filters-row { flex-direction: column; align-items: stretch; gap: 15px; }
            .btn-group { justify-content: center; width: 100%; display: flex; }
            .filter-btn { flex: 1; text-align: center; }
            
            .grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>

    <div id="error-overlay">
        <div class="error-content">
            <h3>⚠ Nie widać pliku data.js</h3>
            <p>Upewnij się, że plik <b>data.js</b> leży w tym samym folderze.</p>
            <button onclick="location.reload()" style="margin-top:10px; cursor:pointer; padding: 5px 15px;">Odśwież</button>
        </div>
    </div>

    <nav>
        <div class="logo" id="nav-name">...</div>
        <div class="nav-links">
            <button onclick="go('home')" class="active" id="btn-home">O mnie</button>
            <button onclick="go('projects')" id="btn-projects">Projekty</button>
            <button onclick="go('tracker')" id="btn-tracker">Biblioteka</button>
            <button onclick="go('stats')" id="btn-stats">Statystyki</button>
        </div>
    </nav>

    <main>
        <section id="view-home" class="section active">
            <div class="hero scroll-hidden">
                <img src="" onerror="this.style.display='none'" class="avatar" id="hero-img">
                <div id="avatar-placeholder" class="avatar" style="display:none; line-height:140px; color:#555; text-align:center;">FOTO</div>
                <h1 id="hero-title">...</h1>
                <p id="hero-bio">...</p>
                <button class="btn-cta" onclick="go('projects')" id="hero-btn">Zobacz Projekty</button>
            </div>

            <div id="about-extended-container" class="about-extended scroll-hidden" style="display:none;">
                <h3>O mnie</h3>
                <div id="about-extended-text">...</div>
            </div>

            <div id="random-quote-container" class="quote-container scroll-hidden">
                <div class="quote-box">
                    <div style="font-size:3rem; position:absolute; top:-20px; left:20px; opacity:0.1; font-family:serif;">“</div>
                    <p class="quote-text" id="quote-text">...</p>
                    <div class="quote-author" id="quote-author">...</div>
                </div>
            </div>
        </section>

        <section id="view-projects" class="section">
            <div class="hero scroll-hidden" style="padding: 20px 0 40px 0;">
                <h2 style="font-size:2rem; margin-bottom:10px;">Projekty</h2>
                <p style="color:#777">To co tworzę po godzinach.</p>
            </div>
            <div id="projects-grid" class="projects-grid"></div>
        </section>

        <section id="view-tracker" class="section">
            <div class="controls-container scroll-hidden">
                <div class="search-row">
                    <input type="text" id="search-input" class="search-input" placeholder="Szukaj..." oninput="handleSearch(this.value)">
                </div>
                <div class="filters-row">
                    <div class="btn-group">
                        <button class="filter-btn active" onclick="setFilter('all', this)">Wszystko</button>
                        <button class="filter-btn" onclick="setFilter('book', this)">Książki</button>
                        <button class="filter-btn" onclick="setFilter('movie', this)">Filmy</button>
                        <button class="filter-btn" onclick="setFilter('series', this)">Seriale</button>
                    </div>
                    <select id="sort-select" onchange="setSort(this.value)">
                        <option value="newest">Najnowsze</option>
                        <option value="oldest">Najstarsze</option>
                        <option value="rating-high">Ocena: Najwyższa</option>
                    </select>
                </div>
            </div>
            <div id="grid" class="grid"></div>
        </section>

        <section id="view-stats" class="section">
            <div class="hero scroll-hidden" style="padding: 20px 0 40px 0;">
                <h2 id="stats-year-title" style="font-size:2rem; margin-bottom:10px;">Podsumowanie</h2>
                <p style="color:#777">Liczby nie kłamią.</p>
            </div>
            <div class="stats-grid">
                <div class="stat-card scroll-hidden"><div class="stat-number" id="stat-books">0</div><span class="stat-label">Książki</span></div>
                <div class="stat-card scroll-hidden"><div class="stat-number" id="stat-movies">0</div><span class="stat-label">Filmy</span></div>
                <div class="stat-card scroll-hidden"><div class="stat-number" id="stat-series">0</div><span class="stat-label">Seriale</span></div>
                <div class="stat-card scroll-hidden"><div class="stat-number" id="stat-total" style="color:white">0</div><span class="stat-label">Łącznie</span></div>
            </div>
        </section>
    </main>

    <footer class="site-footer scroll-hidden">
        <div class="footer-content">
            <h3 style="color:#666; font-size:0.9rem; text-transform:uppercase; letter-spacing:1px; margin-bottom:20px;">Kontakt</h3>
            <a href="mailto:..." id="footer-email" style="font-size:1.2rem; color:white; text-decoration:none; font-weight:700;">...</a>
            <div id="footer-socials" style="margin-top:30px;"></div>
            <div class="footer-copy" style="margin-top:40px; color:#444; font-size:0.8rem;">&copy; <span id="footer-year"></span> Personal Tracker</div>
        </div>
    </footer>

    <script>
        let currentFilter = 'all';
        let currentSort = 'newest'; 
        let currentSearch = '';

        // --- OBSERVER DO ANIMACJI SCROLLOWANIA ---
        // To jest serce "doczytywania" przy scrollu
        const observerOptions = {
            threshold: 0.1, // Element musi być w 10% widoczny, żeby odpalić animację
            rootMargin: "0px 0px -50px 0px" // Lekki margines od dołu
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('scroll-show');
                    observer.unobserve(entry.target); // Animuj tylko raz
                }
            });
        }, observerOptions);

        function observeElements() {
            // Szukamy wszystkich elementów z klasą 'scroll-hidden' i zaczynamy je obserwować
            document.querySelectorAll('.scroll-hidden').forEach((el) => observer.observe(el));
        }

        // --- START ---
        if (typeof window.myAppConfig === 'undefined') {
            document.getElementById('error-overlay').style.display = 'flex';
        } else {
            startApp();
        }

        function startApp() {
            const data = window.myAppConfig;
            
            // Wypełnianie danych profilu
            document.getElementById('nav-name').innerText = data.profile.name;
            document.getElementById('hero-title').innerText = data.profile.welcomeMessage;
            document.getElementById('hero-bio').innerText = data.profile.bio;
            
            if (data.profile.aboutMeExtended) {
                document.getElementById('about-extended-container').style.display = 'block';
                document.getElementById('about-extended-text').innerText = data.profile.aboutMeExtended;
            }

            const imgEl = document.getElementById('hero-img');
            if(data.profile.image) imgEl.src = data.profile.image;
            else { imgEl.style.display = 'none'; document.getElementById('avatar-placeholder').style.display = 'inline-block'; }

            // Stopka
            if(data.profile.email) {
                const mail = document.getElementById('footer-email');
                mail.innerText = data.profile.email;
                mail.href = "mailto:" + data.profile.email;
            }
            if(data.profile.socialLinks) {
                const socialContainer = document.getElementById('footer-socials');
                socialContainer.innerHTML = '';
                data.profile.socialLinks.forEach(link => {
                    const btn = document.createElement('a');
                    btn.href = link.url; btn.innerText = link.name; btn.className = 'social-btn'; btn.target = "_blank";
                    socialContainer.appendChild(btn);
                });
            }
            document.getElementById('footer-year').innerText = new Date().getFullYear();

            // Renderowanie sekcji
            renderProjects();
            renderRandomQuote(); 
            calculateStats();
            processAndRender();

            // Uruchomienie obserwatora animacji po załadowaniu
            setTimeout(observeElements, 100);
        }

        function renderProjects() {
            const projects = window.myAppConfig.projects;
            const container = document.getElementById('projects-grid');
            container.innerHTML = '';
            if (!projects || projects.length === 0) { container.innerHTML = '<p>Brak projektów.</p>'; return; }

            projects.forEach((p, index) => {
                let linkHtml = p.link ? `<a href="${p.link}" target="_blank" style="color:var(--accent); text-decoration:none; border-bottom:1px solid var(--accent); margin-top:auto; display:inline-block; font-size:0.9rem;">Zobacz &rarr;</a>` : '';
                // Dodajemy klasę scroll-hidden oraz opóźnienie (style) dla efektu kaskady
                let html = `
                    <div class="project-card scroll-hidden" style="transition-delay: ${index * 50}ms">
                        <div style="margin-bottom:10px;">
                            <h3 class="project-title">${p.title}</h3>
                            <span class="project-year">${p.year}</span>
                        </div>
                        <span class="project-role">${p.role}</span>
                        <p style="color:#aaa; font-size:0.9rem; line-height:1.6; flex-grow:1;">${p.description}</p>
                        ${linkHtml}
                    </div>`;
                container.insertAdjacentHTML('beforeend', html);
            });
        }

        function processAndRender() {
            let items = [...window.myAppConfig.items];
            if (currentFilter !== 'all') items = items.filter(item => item.category === currentFilter);
            if (currentSearch.length > 0) items = items.filter(item => (item.title.toLowerCase().includes(currentSearch) || (item.author && item.author.toLowerCase().includes(currentSearch))));
            
            items.sort((a, b) => {
                if (currentSort === 'newest') return new Date(b.date) - new Date(a.date);
                if (currentSort === 'oldest') return new Date(a.date) - new Date(b.date);
                if (currentSort === 'rating-high') return b.rating - a.rating;
                return 0;
            });

            const grid = document.getElementById('grid');
            grid.innerHTML = '';
            if(items.length === 0) { grid.innerHTML = '<p style="color:#777;">Brak wyników.</p>'; return; }

            items.forEach((item, index) => {
                let badgeClass = item.category === 'book' ? 'cat-book' : item.category === 'movie' ? 'cat-movie' : 'cat-series';
                let catName = item.category === 'book' ? 'KSIĄŻKA' : item.category === 'movie' ? 'FILM' : 'SERIAL';
                let imgHtml = item.image ? `<img src="${item.image}" class="card-img" alt="${item.title}" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex'">` : `<div class="card-img">${item.title}</div>`;
                let linkHtml = item.link ? `<a href="${item.link}" target="_blank" style="margin-top:auto; color:var(--accent); text-decoration:none; font-size:0.9rem;">Więcej &rarr;</a>` : '';
                let authorHtml = item.author ? `<div style="color:var(--accent); font-size:0.9rem; font-weight:600; margin-bottom:5px;">${item.author}</div>` : '';
                let descHtml = processDescription(item.description, item.id);

                let html = `
                    <div class="card scroll-hidden" style="transition-delay: ${(index % 5) * 50}ms"> 
                        ${imgHtml}
                        <div class="card-body">
                            <div class="meta-row"><span class="badge ${badgeClass}">${catName}</span><span style="color:#666;">${item.date}</span></div>
                            <h3 style="margin:0 0 5px 0; font-size:1.1rem; line-height:1.3;">${item.title}</h3>
                            ${authorHtml}
                            <div style="color:#f1c40f; font-weight:bold; font-size:0.9rem;">★ ${item.rating}/10</div>
                            <p class="card-description">${descHtml}</p>
                            ${linkHtml}
                        </div>
                    </div>`;
                grid.insertAdjacentHTML('beforeend', html);
            });
            
            // Po wyrenderowaniu musimy "podpiąć" nowe elementy pod obserwatora
            observeElements();
        }

        // Funkcje pomocnicze
        function renderRandomQuote() {
            const data = window.myAppConfig;
            if (data.quotes && data.quotes.length > 0) {
                const randomQuote = data.quotes[Math.floor(Math.random() * data.quotes.length)];
                document.getElementById('quote-text').innerText = randomQuote.text;
                document.getElementById('quote-author').innerText = randomQuote.author;
                document.getElementById('random-quote-container').style.display = 'block';
            }
        }
        function calculateStats() {
            const year = new Date().getFullYear();
            document.getElementById('stats-year-title').innerText = `Podsumowanie ${year}`;
            const items = window.myAppConfig.items.filter(i => i.date.startsWith(year.toString()));
            document.getElementById('stat-books').innerText = items.filter(i => i.category === 'book').length;
            document.getElementById('stat-movies').innerText = items.filter(i => i.category === 'movie').length;
            document.getElementById('stat-series').innerText = items.filter(i => i.category === 'series').length;
            document.getElementById('stat-total').innerText = items.length;
        }
        function handleSearch(val) { currentSearch = val.toLowerCase(); processAndRender(); }
        function setFilter(cat, btn) { currentFilter = cat; document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active')); if(btn) btn.classList.add('active'); processAndRender(); }
        function setSort(val) { currentSort = val; processAndRender(); }
        function processDescription(text, id) {
            if (!text) return ''; const limit = 100; if(text.length <= limit) return text;
            return `<span id="s-${id}">${text.substring(0,limit)}...</span><span id="f-${id}" style="display:none">${text}</span><button onclick="tg(${id})" id="b-${id}" class="read-more-btn">rozwiń</button>`;
        }
        window.tg = function(id) {
            let s=document.getElementById(`s-${id}`), f=document.getElementById(`f-${id}`), b=document.getElementById(`b-${id}`);
            if(f.style.display==='none'){f.style.display='inline';s.style.display='none';b.innerText='zwiń';}else{f.style.display='none';s.style.display='inline';b.innerText='rozwiń';}
        };

        // --- NAWIGACJA + RESTART ANIMACJI ---
        function go(view) {
            // Ukryj wszystko
            document.querySelectorAll('.section').forEach(e => {
                e.classList.remove('active');
            });

            // Aktywuj wybrany widok
            const activeSection = document.getElementById('view-' + view);
            activeSection.classList.add('active');
            
            // Menu active state
            document.querySelectorAll('.nav-links button').forEach(b => b.classList.remove('active'));
            if(document.getElementById('btn-'+view)) document.getElementById('btn-'+view).classList.add('active');
            
            // Ważne: Przewiń na górę
            window.scrollTo(0, 0);

            // Zresetuj animacje wewnątrz nowej sekcji
            // (Usuwamy klasę scroll-show, żeby obserwator mógł ją nadać ponownie przy przewijaniu)
            activeSection.querySelectorAll('.scroll-hidden').forEach(el => {
                el.classList.remove('scroll-show');
            });

            // Ponownie uruchom obserwatora dla elementów w tej sekcji
            observeElements();
        }
    </script>
</body>
</html>

